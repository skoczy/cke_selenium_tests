/*
 * Copyright (c) 2016 Statoil Fuel & Retail ASA
 * All rights reserved.
 *
 * This code is proprietary and the property of Statoil Fuel & Retail ASA. It may not be
 * distributed without written permission from Statoil Fuel & Retail ASA.
 */

task dropDb(type: JavaExec) {
    doFirst { descriptor ->
        System.properties.findAll {
            it.key.startsWith('hibernate') || it.key.startsWith('jde') || it.key.startsWith('log4j') || it.key.startsWith('application.environment')
        }.each {
            systemProperties << it
        }
    }
    classpath = sourceSets.data.runtimeClasspath + sourceSets.data.resources
    main = 'data.LiquiTool'
    args 'dropAll'
}

task updateDb(type: JavaExec) {
    doFirst { descriptor ->
        System.properties.findAll {
            it.key.startsWith('hibernate') || it.key.startsWith('jde') || it.key.startsWith('log4j') || it.key.startsWith('application.environment')
        }.each {
            systemProperties << it
        }
    }
    classpath = sourceSets.data.runtimeClasspath + sourceSets.data.resources
    main = 'data.LiquiTool'
    args 'update'
}